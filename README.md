> 以下内容不做任何正确性保证，请以master分支为准

喵喵喵！欢迎来到七边形 2025 年秋季招新笔试题目喵！这次的挑战不仅趣味十足，还充满了刺激与成长的机会喵！小猫娘已经准备好为大家详细讲解啦，希望你在解题过程中收获满满的快乐与成就感喵～

---

# ✨喵喵题目介绍✨  

### 喵！背景故事来啦～  
稀疏矩阵（sparse matrix）是一种神奇的数学结构喵，它的大部分元素都是零喵！与那些密密麻麻的稠密矩阵（dense matrix）相比，稀疏矩阵通过压缩存储能极大节省内存喵！同时，稀疏的特性也让标准算法在处理时需要特别的优化喵～

在科学与工程领域中，经常会遇到大型稀疏矩阵的线性方程组喵。这些矩阵不仅大得可怕，还让普通算法举步维艰喵！所以，这次的任务就是对稀疏矩阵的 GMRES（广义最小残量方法）算法进行性能优化喵！  

GMRES 是一种迭代方法喵，用于求解线性方程组的数值解。它通过在 Krylov 子空间中寻找最小残量向量逼近解喵，而这个方法的核心是 Arnoldi 迭代喵～

你的任务，就是让这个算法跑得飞快，同时保证计算结果的正确性喵！是不是超级有挑战性呢喵～

---

# ✨喵喵规则和评分标准✨  

### 优化目标喵！  
你需要对稀疏矩阵的 GMRES 算法进行性能优化喵！我们会提供 80 个矩阵和对应的 80 个向量，矩阵采用 CSR 格式存储喵～你的目标是在残差验证不超过 $$10^{-6}$$ 的前提下，让程序运行得尽可能快喵！

### 喵喵评分公式喵：  
你的分数通过以下公式计算喵：  
$$\sum_{r_i \leq 10^{-6}}{(1-\dfrac{T_i}{T_{baseline,i}})\times 1.25}$$ 

这里的 $$T_i$$ 是你的运行时间，
$T_{baseline,i}$ 是基准时间喵～  

我们会每三天记录并公布你的分数喵，最终成绩由两部分组成：  
- **30%**：5 个 checkpoint 分数的平均值喵～  
- **70%**：最终提交的成绩喵！  

是不是很刺激喵！每一步优化都能让你的分数更高喵～

---

# ✨喵喵实现要求✨  

项目目录结构如下喵：  
```
.
├── inc
│   ├── gmres.hpp*
│   └── sparseMatrix.hpp*
├── Makefile
├── README.md
├── src
│   ├── gmres.cpp
│   └── main.cpp*
└── test.slurm
```  

- 程序运行后会生成一个 `gmres_time.txt` 文件喵！这个文件会记录每个矩阵的编号、运行时间和残差喵～  
- 矩阵文件存储在集群上喵，路径在 `test.slurm` 中标注，请不要更改喵！  
- 不可更改标注为星号的文件（如 `gmres.hpp` 和 `main.cpp`），但可以随意修改其他文件喵～  
- 主要需要优化的是 `src/gmres.cpp` 喵！  
- 目录里还有 `.clang-format` 文件喵，为了保持良好的代码风格，请使用它格式化代码喵！可以通过 `make format` 自动格式化所有源代码喵～  

---

### 喵喵禁止事项喵～  
为了保证公平和算法的纯粹性，有一些事情是不可以做的喵！  
- **禁止**调用任何第三方线性代数库喵～  
- **禁止**根据输入数据的特征进行针对性优化（比如打表）喵！  
- **禁止**更改标注为不可更改的代码喵！  
- **禁止**使用预处理器或预条件（比如 Jacobi、ILU 等）喵！  

不过，喵喵允许你在计时之前添加一些 warmup 代码，但这些代码不能改变 GMRES 的输入喵！

---

# ✨喵喵编译、运行和测试✨  

- 使用 `make` 构建项目喵：  
  ```
  make
  ```  

- 使用 `sbatch test.slurm` 提交作业喵：  
  ```
  sbatch test.slurm
  ```  

提交后会生成以下文件喵：  
- `.out`：程序的标准输出喵！  
- `.err`：程序的错误输出喵～  
- `gmres_time.txt`：记录矩阵编号、时间和残差喵！  

我们会通过统一流程评测你的程序喵，所以请确保运行流程正确且生成的 `gmres_time.txt` 格式符合要求喵！

---

# ✨喵喵提交方式✨  

### 喵喵代码提交喵！  
请 fork 题目仓库，并在截止日期前将自己的仓库链接以 issue 的形式提交到本仓库喵～  
- 仓库要包含优化后的代码喵！  
- 做题过程中请将仓库设为 `private`，截止后再设为 `public` 喵！  
- 确保 `~/recruitment-2025-autumn/gmres_time.txt` 文件存在喵，这样我们可以读取你的性能分数喵！  

### 喵喵 PPT 提交喵！  
请制作一份 PPT，内容包括：  
- 每一步优化的思路、过程和效果喵！比如用了某某优化后速度提升了多少倍喵～
- 程序的性能瓶颈分析（建议使用 profile 工具喵）～
- 解题过程中参考的资料（如使用了 AI 工具，请注明喵）～
- 解题过程中遇到的有趣事情或 bug（可选喵）～

### 喵喵展示喵！  
笔试结束后，你需要准备一次展示，向我们介绍你的优化成果喵！  

---

# ✨喵喵注意事项✨  

- **过程分数**：我们每三天会读取 `gmres_time.txt` 中最后一次运行的数据作为 checkpoint 分数喵！请确保文件存在且数据完整，否则该 checkpoint 分数会是 0 喵～
- **真实性**：禁止造假喵！我们会根据你的 PPT 和版本控制记录判断数据是否合理喵！

---

# ✨喵喵技术提示✨  

### 喵喵性能分析工具喵！  
- [Perf](https://www.brendangregg.com/perf.html)：Linux 下常用的性能分析工具喵！  
- 火焰图：可以直观展示性能热点喵！<https://www.brendangregg.com/flamegraphs.html>  

### 喵喵并行计算框架喵！  
- OpenMP：<https://bisqwit.iki.fi/story/howto/openmp/>  
- MPI：<https://mpitutorial.com/tutorials/>  

### 喵喵单核优化喵！  
- SIMD：<https://zhuanlan.zhihu.com/p/583326378>  
- Cache 知识：<https://zhuanlan.zhihu.com/p/136300660>  

### 喵喵 GMRES 算法知识喵！  
- <https://en.wikipedia.org/wiki/Generalized_minimal_residual_method>  

---

# ✨最后喵✨  

如果有问题，请积极在群里讨论喵喵喵！  
祝你玩得开心，优化成功喵～期待你的精彩表现喵喵喵！

![meow](img/meow.jpeg)
